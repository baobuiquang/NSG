TEMP_VDOCR_EXTRACTED = [
"""
CÔNG TY TNHH XÂY DỰNG MỸ ĐÀ
CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM
BAN ĐIỀU HÀNH XL11-CT-ST1
Độc lập - Tự do - Hạnh Phúc
Sóc trăng, ngày 27 Tháng 12 Năm 2024
PHIẾU ĐỀ NGHỊ CUNG CẤP VẬT TƯ - THIẾT BỊ (LÀN 13)
Kính gửi: Phòng vật tư thiết bị Công ty
ID BAN ĐIỀU HÀNH XL11-CT-ST 1
15 Ông: Hoàng Xuân Tuấn
Chức vu: GĐ-Ban điều hành
23 Ông: Trần Ngọc Dũng
Chức vụ: CBKT
33 Ông: Nguyễn Trung Hiếu
Chức vụ: CBKT
IỊ NỘI DUNG
D Gói thầu số 11: Thi công xây lấp (Đoạn Km1594500 đến Km162+328,33)
22 Hạng mục: Cầu số 24,25,26 - XL11
Ban điều hành đề nghị Phòng vật tư thiết bị Công ty kiểm tra xem xét và nhập vật tư cụ thể như sau:

| Stt | Hạng mục | Đơn vị | Khối lượng/Số lượng | Ngày về công trường | Ghi chú |
| I | Sàn giảm tải M2- Cầu số 24 |  |  |  |  |
| 1 | D6 | Kg | 3000 | 31/12/2024 |  |
| 2 | D10 | Cây |  | 31/12/2024 |  |
| 3 | D12 | Cây | 177 | 31/12/2024 |  |
| 4 | D16 | Cây | 1300 | 31/12/2024 |  |
| 5 | Thép tâm D220, dày 5mm (Hình tròn) | tấm | 81 | 31/12/2024 |  |
| 6 | Thép tâm D230, dày 5mm (Hình tròn) | tấm | 81 | 31/12/2024 |  |

Ghi chú: Cung cấp chứng chỉ khi vật tư về công trường
Người lập Ban điều hành
MINY NCM
Hoàng Xuân Tuấn
""",
"""
⚠️ TREC > Error at xs/ys > 299 is not in list
⚠️ TREC > Error at xs/ys > 299 is not in list
GÓI THẦU SỐ 13: GÓI THẦU XÂY LÁP 02: DƯ ÁN KHÁNH HÊ THUỐT
Căn cứ vào nhu cầu thực tế, nay Công ty CPXD Hạ Tầng Bắc Trung Nam cần đặt mua số hàng hóa, cụ
thể như sau:

| TT | TÊN - QUY CÁCH - CHỦNG LOẠI HÀNG HÓA | ĐVT | KL ĐẶT HÀNG | GHI CHÚ |  |
| 1 |  |  | 21.531 |  |  |
| 1 | L-6,4m Thép tròn D16 CB400V | Kg | 2.599] | 233 cây] |  |
| 2 | L-12,4m Thép tròn D20 CB400V | Kg | 2.144] | 70 cây] |  |
| 3 | L-7,5m Thép tròn D22 CB400V | Kg | 2.593 | 116 câyl |  |
| 4 | L-7,7m Thép tròn D28 CB400V | Kg | 8.591] | 231 cây] |  |
| 5 | Thép tròn D32 CB400V L-8,3m | Kg | 5.604] | 107 cây] |  |
|  |  |  |  |  | (Tháo đột cá Bê+ thân mố M2 |

(Tháp đết cák)
Jv
Ghi chú:
- Loại thép: Thép TungHo
Vận chuyển bằng đường bộ
Vui lòng cung cấp chứng chỉ chất lượng kèm theo khi giao hàng
- Ngày nhân hàng dự kiến: Theo lịch cán của nhà máy
- Địa điểm nhận hàng: Công trường Cầu Hòn Lai Xã Ninh Tây, tx Ninh hòa, Khánh hoà
- Người nhận hàng: MR.Huy SĐT: 0375.933.618 (Thầu Phụ: Phương Đông)
Xin trân trọng cảm ơn về sự hợp tác./.
""",
"""
Công ty Cổ Phân thép CỘNG HÒA XÃ HỘI CHÚ NGHĨA VIỆT NAM
Hà Sơn Độc lập - Tư do - Hanh Phúc
Số: 0502/HS Hà Nội, ngày 05 tháng 02 năm 2025
BAO GIA KIÊM XÁC NHÂN ĐƠN ĐẤT HANG
Kinh gứi: Công ty TNHH XNK Nam Sài Gòn
CONG TY CÓ PHÂN THẾP HA SƠN
Địa chi: Tô Đông Ngạc 1 - Phường Đông Ngạc ? Quận Bắc Từ Liêm - Hà Nội
Công ty chúng tôi có nhu câu lây hàng theo đơn hàng cụ thế như sau:

| TT | Chúng loại vật tư (Thép VAS) | ĐVT | Khối lượng | Đơn giá (Đồng/kg) | Ghi chú |
| 1 | Thép D10 CB400 | Cây | 203 |  | Xe 1: 51C-53060- Tài xế Lê Văn Chức -CCCD 040084037842-cấp 10/05/2021 - tại CCS QLHC VÊ TTXH |
| 2 | Thép D12 CB400 | Cây | 48 |  | Xe 1: 51C-53060- Tài xế Lê Văn Chức -CCCD 040084037842-cấp 10/05/2021 - tại CCS QLHC VÊ TTXH |
| 3 | Thép D14 CB400 | Cây | 41 |  | Xe 1: 51C-53060- Tài xế Lê Văn Chức -CCCD 040084037842-cấp 10/05/2021 - tại CCS QLHC VÊ TTXH |
| 4 | Thép D18 CB400 | Cây | 647 |  | Xe 1: 51C-53060- Tài xế Lê Văn Chức -CCCD 040084037842-cấp 10/05/2021 - tại CCS QLHC VÊ TTXH |
| 5 | Thép D20 CB400 | Cây | 89 |  | Xe 1: 51C-53060- Tài xế Lê Văn Chức -CCCD 040084037842-cấp 10/05/2021 - tại CCS QLHC VÊ TTXH |
| 6 | Thép D25 CB400 | Cây | 336 |  | Xe 1: 51C-53060- Tài xế Lê Văn Chức -CCCD 040084037842-cấp 10/05/2021 - tại CCS QLHC VÊ TTXH |
| 7 | Thép D16 CB400 | Cây | 1.205 |  | Xe 2: 51D 117703 - Txe Hô Văn Quốc CCCD: 052099015105 Cấp 21/6/2024 cấp tại DKQLCT VA DLQG VỀ CƯ DÂN |
| 8 | Thép D22 CB400 | Cây | 73 |  | Xe 2: 51D 117703 - Txe Hô Văn Quốc CCCD: 052099015105 Cấp 21/6/2024 cấp tại DKQLCT VA DLQG VỀ CƯ DÂN |
| 9 | Thép D28 CB400 | Cây | 192 |  | Xe 2: 51D 117703 - Txe Hô Văn Quốc CCCD: 052099015105 Cấp 21/6/2024 cấp tại DKQLCT VA DLQG VỀ CƯ DÂN |

Đơn giá trên chưa bao gồm thuê GTGT 10%.
Địa chi giao hàng: tại nhà máy.
Phương thức thanh toán: Thanh toán tiến ngay sau khi nhận hàng
XÁC NHẬN BÊN BẢN CÔNG TY CÔ PHÂN THẾP HÀ SƠN
Công ty)
CỔ PHẦN THÉP
HÀ SỢN
CHỦ TỊCH HỘI ĐÔNG QUẢN TRỊ
wên Đức Thườn
""",
"""
QT.ĐTMS.02/BMO1
CÔNG TY CÓ PHÀN CỘNG HÒA XÃ HỘI CHỦ NGHĨA VIỆT NAM
PCI MIÊN NAM Độc lập - Tự do - Hạnh phúc
BAN ĐIỂU HÀNH DỰ ÁN
Đồng Nai, ngày 03 tháng 02 năm 2025
GIAY ĐE NGHỊ CÁP VẬT TƯ
V/v: Trình cấp vật tư phục vụ công tác thi công.
Công trình: Đường dây 220kV Sông Mây - Tam Phước
Hang muc: Phần Móng
Kính gửi: - Ông Phó Tổng Giám đốc Công ty;
Phòng Điêu hành dự án.
- Căn cứ vào tình hình thi công trên công trường.
Ban Điều hành dự án kính đề nghị ông Phó Tông Giám độc Công ty và Phòng Điều hành dự án cung cập vật
tư phục vụ thi công công trình với sô lượng cụ thê như sau:

| STT | Chủng loại vật tư | Đơn vị | Khối lượng | Khối lượng | Khối lượng | Khối lượng | Ghi chú |
| STT | Chủng loại vật tư | Đơn vị | Tiên lượng [ | Đã cấp | Đề nghị cấp | Còn lại | Ghi chú |
|  | Móng VT39 (4T50-80-XL) |  |  |  |  |  |  |
|  | [Thép F08 - AI | kg | 2.338,82 |  | 2.338,82 [ |  |  |
| 2 | Thép F10 - AIII | kg | 1.144,77 |  | 1.144,77 |  |  |
|  | Thép F14 - AIII | kg | 9.079,69 |  | 9.079,69 |  |  |
|  | [Thép F25 - AIII | kg | 11.502,63 |  | 11.502,63 |  |  |
|  | Thép F28 - AIII | kg | 6.020,52 |  | 6.020,52 |  |  |
| 6 | STUBAR | Bộ | 4,00 [ |  | 4,00 [ |  | Stubar, tiêp địa có tại kho Tràng Bom |
|  | [Tiếp địa TĐ4x40-32 | bộ | 1,00 |  | 1,00 |  | Stubar, tiêp địa có tại kho Tràng Bom |
| Tổng thép | Tổng thép |  | 30.086,43 |  | 30.086,43 |  |  |

Ghi chú:
- Thời gian để nghị cấp: ngày 06/02/2025
- Địa điêm tiệp nhận: Tại vị trí móng 39 thuộc Tam Phước - Biên Hòa - Đông Nai. Công ty Minh Phương Mr
Định SDT: 88 977 408 985
Kính đề nghị Phó Tông Giám đốc Công ty, Phòng Điều hành dự án xem xét giải quyết
Trân trọng
P. TÔNG GIÁM ĐỐC P. ĐIÊU HÀNH DỰ ÁN Ban ĐHDA
Trần Ngọc Dũng
""",
"""
CÔNG TY CP KINH DOANH THƯƠNG MẠI THẾP ĐẠI VIỆT
Địa chỉ: ? 14, Lô H3, Đường Số 1, KDC Vĩnh Phú 2,
Phường Vĩnh Phú, Thành phố Thuận An, Tỉnh Bình Dương
ĐẠI VIỆT
Website: daivietsteel.com, email: Kdthepdaiviet Ogmail.com
Số 0802/DAIVIET-NSG/2025 Bình Dương, ngày 08/02/2025
ĐON ĐAT HANG
Kính gửi: CÔNG TY TNHH XUẤT NHẬP KHẦU THƯƠNG MẠI GÒN
ĐT:
Trước tiên, Công ty CP Kinh Doanh TM Thép Đại Việt chân thành cảm ơn sự hợp tác của Quý Đơn vị
Căn cứ hợp đồng số nguyên tắc: 164-2023/HĐNT-NSG-ĐV ngày 101072223, công ty Đại Việt có nhu cấu đặt hàng như sau
I. THÔNG TIN VỀ LÔ HÀNG:

| TT | Chủng loại - Mác thép | I Qui cách | Số lượng cây | Barem (kg/cây) | Khối lượng (kg) | ĐƠN GIÁ (đ/kg) | THÀNH TIÊN (Đồng) | GHI CHÚ | GHI CHÚ |
| TT | Chủng loại - Mác thép | I Qui cách | Số lượng cây | Barem (kg/cây) | Khối lượng (kg) | ĐƠN GIÁ (đ/kg) | THÀNH TIÊN (Đồng) | Số bó | Cây lẻ |
| 1 | D6VASCB240T |  | 1 cuộn |  | 2.100] | 13.440 | 28.224.000 |  |  |
| 2 | D8VASCB240T |  | 1 cuộn |  | 2.100] | 13.440 | 28.224.000 |  |  |
| 3 | D10VASCB400V | 11.7m/c | 1.000 | 6,89 | 6.890] | 13.340 | 91.912.600 |  | 120] |
|  | D12VASCB400V | 11.7m/c | 350 | 9,89 | 3.462] | 13.340 | 46.183.080 |  | 30 |
|  | D16VASCB400V | 11.7m/c | 500 | 17.80 | 8.900 | 13.340 | 118.726.000 | 2 | I 140] |
| 6 | D18VASCB400V | 11.7m/c | 100 | 22,48 | 2.248 | I 13.340 | 29.988.320 |  | 100 |
|  | [D20VASCB400V | 11.7m/c | 300 | 27.77 | 8.33: | I 13.340 | 111.135.540 |  | 72] |
|  | Cộng tiền hàng |  |  |  | 34.031 |  | 454.393.540 |  |  |
|  | THUẾ VAT 10% |  |  |  |  |  | 45.439.354 |  |  |
|  | Tống cộng |  |  |  |  |  | 499.832.894 |  |  |

2]
2.248]
8.331]
Hàng hóa mới 100%, không bị nứt nẻ, hàng cấp đúng tiêu chuấn.
Hàng thắng (w) Hàng cong Phiếu KCS
II. THÔNG TIN NHẬN HÀNG:
1.Địa điểm nhận hàng: KHO BÊN BÁN TẠI KCN ĐÁT CUỐC - TUỆ MINH - BÌNH DƯƠNG
2.Người nhận hàng: Theo giây giới thiệu
3.Thời gian nhận hàng: Ngày: 10/02/2025
4.Kiềm đếm số lượng: Thép cuộn tính theo cân, Thép cây tính theo barem (như bảng tính) hoặc theo
phiếu cân nhà máy
5.Điện thoại liên hệ: Ms Như - 0964 040 642
6.Thanh toán: Thanh toán trong v0ng 30 ngày kê từ ngày nhận hàng
7.Thông tin khác: Chứng từ theo hàng: BBGN, Chứng chi chất lượng, chứng chi xuất xưởng
Thông tin xuất hoá đơn: Theo Hợp đồng
Rất mong sớm nhận được phản hôi của Quý công ty để chúng tôi có kê hoạch nhận hàng nhanh nhất
Xin chân thành cảm ơn
OS2
XÁC NHẬN CỦA BÊN BẢN CÔNG TY CP KINH DOANH TM THẾP ĐẠI VIỆT
10313462
CCNG TY CỔ PHÁ
KINH DOAN)
THƯƠNG MẠI THẾP
ĐẠI VIỆT
GIÁM ĐỐC
Vi 1 lan Whinh
""",
"""
|  | TÔNG CỘNG | Kg | 32.418,52 |  |
| 1 | Thép D10-CB400V L-11,7m | Kg | 274 ] | [38 thanh |
| 2 | Thép D12-CB400V L-11,7m | Kg | 8.603 | 828 thanh |
| 3 | L-11,7m Thép D16-CB400V | Kg | 1.239 | 67 thanh |
| 3 | Thép D18-CB400V L-11,7m | Kg | 20.147 | 861 thanh |
| 4 | Thép D28-CB400V L-11,7m | Kg | 2.430 [ | 143 thanh |

Ghi chú:
- Chùng loại: TUNGHO CB400V
- Địa điêm nhận hàng như sau: Câu km51 Thôn Nhiêu Hậu, Xã Xuân Thọ 1, Thị Xã Sông Câu, Phú Yên
- Thời gian giao hàng: 15/02/2025
Người nhận hàng: - Câu km51 Mr Diện: 0398.987.156 Mr Hướng: 0982.484.957
Xin trân trọng cảm ơn về sự hợp tác)
""",
"""
A: 96M Hoang Quoc Viet St, Phu My ward, Dist 7, HCMC
TRUNG HAU 8 1: 84.8 3785 3765 [F:84.8 3785 3766
W: www.trunghaugroup.com
PHIẾU YẾU CẦU VẬT TƯ
CÔNG TRÌNH: Nhà máy sản xuất thùng carton và pallet KAIFUDA VIỆT NAM SỐ: 03
HẠNG MỤC: ÉP CỌC NHÀ XƯỞNG Ngày 22 tháng 01 năm 2025
19 Địa CHỉ: Lô A9.9, đường N4, KCN Thành Thành công, An Hoàn, Tây Ninh
HĐ số:

| Số TT | Hạng mục/ Tên vật tư | Chủng loại, hình dạng, kích thước, tiêu chuấn (mm) | Đơn vị | Khối lượng | Khối lượng | Khối lượng | Ngày bắt đầu cấp | Ghi chủ |
| Số TT | Hạng mục/ Tên vật tư | Chủng loại, hình dạng, kích thước, tiêu chuấn (mm) | Đơn vị | Theo bản vẽ dự toán/dự kiến hoàn thành CT | Khối lượng đã cấp | Khối lượng yêu cầu lần này | Ngày bắt đầu cấp | Ghi chủ |
|  | Thép D6 | CB 240T | kg | 600 |  | 600 | 03/02/2025 |  |
|  | [Thép D8 | CB 240T | kg | 800 |  | 800 | 03/02/2025 |  |
| 3 | [Thép D10. L-11.7m | CB400/ DD990 | cây | 402 |  | 402 | 03/02/2025 |  |
|  | Thép D12, L-11.7m | CB400/ DD990 | cây | 1,974 |  | 1,974 | 03/02/2025 |  |
|  | Thép D14,L-11.7m | CB400/ DD990 | cây | 25 |  | 25 | 03/02/2025 |  |
| 6 | Thép D16, L-11.7m | CB400/ DD990 | cây | 6 |  | 6 | 03/02/2025 |  |
| 7 | Thép D18,L-11.7m | CB400/ DD990 | cây | 30 |  | 30 | 03/02/2025 |  |
| 8 | Thên D20. L-11.7m | CB400/ DD990 | cây | 2 |  | 2 | 03/02/2025 |  |
|  | INTERCONTERSIONALIZES [Thép D22,L-11.7m | CB400/ DD990 | cây | 148 |  | 148 | 03/02/2025 |  |
| 10 | Thép D25, L-11.7m | CB400/ DD990 | cây |  |  |  | 03/02/2025 |  |
| 11 | Thén D28. L-11.7m | CB400/ DD990 | cây |  |  |  | 03/02/2025 |  |
| 12 | INTERSING Kếm buộc | CB400/ DD990 | kg | 500 |  | 500 | 03/02/2025 |  |
| Tống KL theo BOQ] | Tống KL theo BOQ] | Tống KL theo BOQ] | tấn | 223.24 |  |  |  |  |
| Tổng KL thi công hhoo hụt x1.03) | Tổng KL thi công hhoo hụt x1.03) | Tổng KL thi công hhoo hụt x1.03) | tấn | 229.94 |  |  |  |  |
| KL đặt đợt 1 (đợt này) | KL đặt đợt 1 (đợt này) | KL đặt đợt 1 (đợt này) | tấn | 31.7 [ |  |  |  |  |

Thép D20, L-11.7m
TTéé D28, L-11.7m
BAN CHỈ HUY CÔNG TRƯỞNG PHÒNG THI CÔNG
Người lập Chỉ huy trưởng Người kiểm GĐ.Dự án
Trần Vũ Hưng Đỗ Minh Vương
""",
"""
| 1 | L-11,7m Thép tròn D10 CB400V | Kg | 2.599 | 360 cây] |
| 2 | Thép tròn D12 CB400V L-11,7m | Kg | 166 | 16 cây] |
| 3 | L-11,7m Thép tròn D16 CB400V | Kg | 3.549 | 192 cây] |
| 4 | L-11,7m Thép tròn D20 CB400V | Kg | 1.763 | 61 cây] |
| 5 | Thép tròn D22 CB400V L-11,7m | Kg | 11.471 | 329 cây] |
| 6 | L-11,7m Thép tròn D25 CB400V | Kg | 19.684 | 437 cây] |
| 7 | L-11,7m Thép tròn D28 CB400V | Kg | 6.555 | 116 cây] |
| 8 | L-11,7m [Thép tròn D32 CB400V | Kg | 21.188 | 287 cây] |

Ghi chú:
- Loại thép: Thép Vas
U
Vận chuyến bằng đường bộ
Vụi lòng cung cấp chứng chỉ chất lượng kèm theo khi giao hàng
Ngày nhân hàng dự kiến: 08/02/2025
- Địa điểm nhận hàng: Công trường Cầu Hòn Lai Xã Ninh hòa, Khánh hoà
- Người nhận hàng: MR.Si SĐT: 0969 680 359 (Thầu Phụ: Hoàng Tùng)
Xin trân trọng cảm ơn về sự hợp tác./.
""",
"""
11:16 1010 7 11
05-SĐ5-TB-QLVTTB.pdt Xong
1111
CÔNG TY CÓ PHẦN SÔNG ĐÀ 5
Địa chỉ: Tắng 5, Tháp B, Tòa nhà HH4, Khu đô thị Đình, Phường Mỹ
Đình 1, Quận Nam Từ Liêm, Thành phô Hà Nội
Tel: 024.222.555.86 Fax: 024.222.555.58
Website: www.songđa5.com.vn
Hà Nội, ngày 04 tháng 02 năm 2025
THÔNG BÁO
(Chào giá cạnh tranh cung cấp thép thi công phục vụ thi công dự án
Thủy điện Bảo Lạc A tính Cao Băng)
Kính gửi: Các tổ chức, cá nhân
Công ty Cổ phần Sông Đà 5 thông bảo chào giá cạnh tranh cung cấp thép thi công phục
vụ thi công dự án Thùy điện Bảo Lạc A thuộc tỉnh Cao Bằng với thông tin cụ thế như sau:
STT Chủng loại Xuất xứ Khối lượng Ghi chú

|  | Thép D14 CB400V | Thép CB400V Việt Đức, Việt Mỹ, Hòa Phát | 11.510 | 813 cây |
| 2 | Thép D16 CB400V | Thép CB400V Việt Đức, Việt Mỹ, Hòa Phát | 11.203 | 606 cây |
| 3 | Thép D18 CB400V | Thép CB400V Việt Đức, Việt Mỹ, Hòa Phát | 32.526 | 1.390 cây |
|  | Thép D20 CB400V | Thép CB400V Việt Đức, Việt Mỹ, Hòa Phát | 15.027 | 520 cây |
|  | Tổng cộng (Kg) |  | 70.266 [ |  |

1. Địa điểm giao hàng:
Hàng được giao trên phương tiện vận chuyên của bên bản tại kho bên mua tại công
trường Thủy điện Bảo Lạc A - Xã Cô Ba - Bảo Lạc - Cao Bằng.
2. Hình thức giao nhận:
Kiếm đếm theo số cây/cuộn thực nhận, trọng lượng xác định theo số cây/cuộn thực nhận
x Barem TCVN 1651-2:2018.
3. Điếu kiện thanh toán:
- Thanh toán trong vòng 10 ngày kể từ nhận giao hàng và nhận đú chứng từ thanh toán
hợp lệ.
4. Thời gian thực hiện, địa điểm chào giá:
Thời gian chào giá chậm nhất đến 9100? ngày 05/02/2025
- Thời gian dự kiên bên mua bộc hàng: Trong vòng 02 ngày kê từ ngày đặt hàng
Hình thức nhận báo giá:
+ Qua Fax: 024.222.555.58
+ Trực tiếp tại: Phòng QL VTTB&CN - Công Đà 5 - Tầng 4 - Tháp - Tòa
Nhà HH4 - KĐT Sông Đà Mỹ Đình 1 - Q. Nam Từ Liêm - Hà Nội
+Qua gmail: tiencb Asongda5.com.vn hoặc nhungpisd5 A gmail.com.
+ Qua điện thoại/Zalo: Mr Tiến 0985 061 234 hoặc Ms Nhung 0983 206 950
Trân trọng thông báo
CÔNG TY CÓ PHÀN SÔNG ĐÀ 5 Hw
Nơi nhận KIT TỔNG GIẢM SỐC
Đăng Website công ty:
PHÓ LONG GIÁM ĐỐC
Lưu QL VTTB công fy
CŨ THẤN
Sang bà 1/1
VINED
Nguyễn Văn Cường Vôn Văn
""",
"""
⚠️ TREC > Error at xs/ys > 415 is not in list
⚠️ TREC > Error at xs/ys > 39 is not in list
⚠️ TREC > Error at xs/ys > 154 is not in list
⚠️ TREC > Error at xs/ys > 294 is not in list
TỔNG CỘNG Kg 11,140

|  |  |  |  |  |  |  |  |  |  |  |  |
| 1 | L-11.7m Thép D12-CB400V | L-11.7m Thép D12-CB400V | L-11.7m Thép D12-CB400V | L-11.7m Thép D12-CB400V |  | Kg |  |  | 29 thanh |  |  |
| 2 | hép D | 14-CB--00V | L-1 | 1.7m |  | Kg | 2 |  | 117 th | nh |  |
| 3 | hép D | 16-CB- 00V | 11 | 1,7m |  | Kg | 5,269 | 5,269 | 2255 tl | tanh |  |
| 4 | hép D: | 22-CB-.00V | 111 | 1,7m |  | Kg | 3,312 | 3,312 | 195 th: | nh |  |
| 5 | hép D | 15-CB- 00V | 11 | 1,7m |  | Kg | 5 |  | 12 th | nh |  |
| 6 | hép D | 32-CB-.00V | 111 | 1, mm |  | Kg | 1.477 |  | 120 th: | nh |  |
|  |  |  |  |  |  |  |  |  |  |  | 31 1 00V 241 1 00V 1 3,312 00V 00V 541 1,477 00V |

Kg 301 [29 thanh
Thép D14-CB400V L-11,7m Kg 11 thanh
Thép D16-CB400V L-11,7m Kg 285 thanh
Thép D22-CB400V L-11,7m Kg 195 thanh
Thép D25-CB400V L-11,7m Kg 12 thanh
Thép D32-CB400V L-11,7m Kg 1,477 20 thanh
Ghi chú: Chủng loại: Hòa Phát,VAS (Việt Mỹ ),Tungho
Địa điêm nhận hàng: Công trường XLO1-VDD3 P. Long Phường, 99,TP Thủ Đức (Dự
án VD3)
Lưu ý phương án giao hàng tại bãi thi công của đội số 1
Thời gian giao hàng: 18/01/2025
Người nhận hàng: Kỹ Thuật BTN: Mt: Tân 0796 500 699 (liên hệ CT đảng ký thông tin
xe trước khi giao hàng 24h)
- Thủ kho đội TC số 1: Trần Văn Trần V45
""",
"""
TỔNG HỢP Kg 150.406,90 150.406,90 SS68 Cây

| L-11,7m Thép tròn D10 CB400V | Kg | 65 | 64,97 | 9 cây |
| L-11,7m Thép tròn D12 CB400V | Kg | 36.634 | 36.633,73 | 3526 cây |
| L-11.7m Thép tròn D16 CB400V | Kg | 53.757 | 53.757,29 | 2908 cây |
| L-11,7m Thép tròn D18 CB400V | Kg | 43.103 | 43.102,80 | 1842 cây |
| Thép tròn D20 CB400V L-11,7m | Kg | 16.848 | 16.848,12 | 583 cây |

2
3
4
5
Trong đó tông khối lượng được phận chia cụo chc như sau:

| CẦU HÒA BÌNH | Kg | 86.765,74 | 63.637,58 | 3656 Cây |
| Thép tròn D10 CB400V L-11,7m | Kg |  | 64,97 | 9 cây |
| L-11,7m Thép tròn D12 CB400V | Kg | 19.519 | 17.111,67 | 1647 cây |
| L-11,7m Thép tròn D16 CB400V | Kg | 51.604 | 2.144,38 | 116 cây |
| Thép tròn D18 CB400V L-11,7m | Kg |  | 43.102,80 | 1842 cây |
| L-11.7m Thép tròn D20 CB400V | Kg | 15.642 | 1.213,76 | 42 cây |
| XƯƠNG ĐÚC DÂM | Kg | 86.765,74 | 86.769,33 | 5212 Cây |
| L-11,7m Thép tròn D12 CB400V | Kg | 19.519 | 19.522,06 | 1879 cấy |
| Thép tròn D16 CB400V L-11,7m | Kg | 51.604 | 51.612,91 | 2792 cây |
| L-11,7m Thép tròn D20 CB400V | Kg | 15.642 | 15.634,36 | 541 cây |

1
1
2
3
4
5
2
1
2
3
Ghi chú:
Loại thép: VAS, Hòa Phát, Tungho
Vui lòng cung cấp chứng chỉ chất lượng kèm theo khi giao hàng
- Địa điểm nhận hàng như sau
1. Công trường Câu Hòa Bình, ấp Câu Đó, xã Vĩnh Lộc, huyện Hông Dân, tỉnh Bạc Liêu;
2.Bãi đúc dầm Hậu Giang xã Lương Nghĩa, huyện Long Mỹ, tỉnh Hậu Giang
- Thời gian nhận hàng: Ngày 10/02/2025
Người nhận hàng
Bã Đúc Dâm: M Hiên - 0973 892 8590
+ Câu Hòa Bình, Mr Tuân - 0964 103 968
""",
"""
CÔNG TY TNHH XÂY DỰNG MỸ ĐẢ CỘNG HOA XA HỌI CHU NGHIA VIỆT NAM
BCH CT SÓC TRĂNG Độc lập - Tự do - Hạnh phúc
Sóc trăng, ngày 15 tháng 12 năm 2024
PHIÊU ĐẾ NGHỊ CẬP VẬT TƯ THIẾT BỊ
Phiều số 1:/Thép - CÂU HÓA TRUNG
Kính gửi: Phòng vật tư thiết bị Công ty
1.Ban điều hành công trường:
1.1 Người đề nghị cấp vật tư: Trần Ngọc Dũng Chức vụ: CBKT
2. Nội dung:
2.1 Gói thầu số 09: Thi công xây dựng công trình (Đoạn 2 từ Km2?300 đến Km56-678)
2.2 Hạng mục: Thép câu Hòa Trung
2.3 Vị trí kho: Kho công trình cầu Cầu Hòa Trung
Ban điều hành dự án tuyên đường trục phát triên kinh tê Đông Tây để nghị cấp vật tư sau:

| STT | Vật tư - thiết bị | Đơn vị | Số lượng | Ngày cấp | Ghi chú |
| II | CẦU HÓA TRUNG | CẦU HÓA TRUNG | CẦU HÓA TRUNG | CẦU HÓA TRUNG | CẦU HÓA TRUNG |
| 1 | D6 - CB240-T | kg |  | 12/22/2024 |  |
| 2 | D8 - CB240-T | kg |  | 12/22/2024 |  |
| 3 | D10-CB400-V | cây |  | 12/22/2024 |  |
| 4 | D12-CB400-V | cây | 444,00 | 12/22/2024 |  |
| 5 | D14-CB400-V | cây | 157,00 | 12/22/2024 |  |
| 6 | D16-CB400-V | cây | 463,00 | 12/22/2024 |  |
| 7 | D18-CB400-V | cây |  | 12/22/2024 |  |
| 8 | ID20 - CB400-V | cây |  | 12/22/2024 |  |
|  | D22 - CB400-V | cây |  | 12/22/2024 |  |
| 9 | ID25 - CB400-V | cây | 30,00 | 12/22/2024 |  |
| 10 | D28 - CB400-V | cây |  | 12/22/2024 |  |

TÓNG KG 16.746
Kính mong Ban lãnh đạo Công ty, phòng vật tư xem xét phê duyệt đề xuất của công trường
Trân trọng cảm ơn
Người đề nghị Chỉ huy trưởng
(doy Xia Tưới
""",
"""
Công trình: Đường dây 500KV Đức Hòa - Chơn Thành (Gói 11)
Hang mục: Thép móng
Căn cứ Tiên lương sô: 01/TL-PC1MN-KTVT ngày 30/03/2023
Căn cứ vào tình hình thi công trên công trường
Ban Điều hành dự án đề nghi ông Tổng Giám đốc Công ty và Phòng Điều hành dự án cung
giáp vật tư phục vụ thi công công trình với số lượng cụ thể như sau

| STT | Chủ ng loại vật tư | Đơn vị | Khối lượng | Khối lượng | Khối lượng | Khối lượng | Ghi chú |
| STT | Chủ ng loại vật tư | Đơn vị | Theo Tiên lượn g (Đã có HH) | Đã đề nghị | Đề ng hị cầ p đợ t nà y | Cò n lại | Ghi chú |
| Thép d8AI | k g | 2.503,63 |  | 2.503,63 |  |  | S(column.bang trinh.8 +13 |
| Thép d12AIII | k g | 15.710,74 |  | 15.710,74 |  |  | S(column bang trinh.8 +23 |
| Thép d25AIII | k g | 13.783,51 |  | 13.783,51 |  |  | S(column bang trinh.8 +33 |
""",
"""
⚠️ TREC > Error at xs/ys > 612 is not in list
STTI

| TẾN HÀNG KẾM | ĐVT | SL | SL | SL |  |
| TẾN HÀNG KẾM | ĐVT | SL | SL | SL |  |
| TẾN HÀNG KẾM | KG 100 | KG 100 | KG 100 | KG 100 |  |
| TẾN HÀNG KẾM ĐAI 15X15 KG ĐAI 15X30 KG ĐAI 15X5 KG | ĐAI 15X15 KG ĐAI 15X30 KG ĐAI 15X5 KG | 335 | 335 | 335 |  |
| ĐAI 15X15 KG ĐAI 15X30 KG ĐAI 15X5 KG | ĐAI 15X15 KG ĐAI 15X30 KG ĐAI 15X5 KG | 455 | 455 |  |  |
| ĐAI 15X15 KG ĐAI 15X30 KG ĐAI 15X5 KG | ĐAI 15X15 KG ĐAI 15X30 KG ĐAI 15X5 KG | 205 | 205 |  |  |
| D8 HP | KG | 2100 | 2100 |  |  |
| CÂY D10 HP CÂY D12HP | CÂY D10 HP CÂY D12HP | 400 | 400 |  |  |
| CÂY D10 HP CÂY D12HP | CÂY D10 HP CÂY D12HP | 400 | 400 |  |  |
|  |  |  |  |  | ICNNAVU |

1
2
3
4
5
6
7
""",
"""
⚠️ TREC > Error at xs/ys > 422 is not in list
⚠️ TREC > Error at xs/ys > 298 is not in list
⚠️ TREC > Error at xs/ys > 18 is not in list
⚠️ TREC > Error at xs/ys > 976 is not in list
⚠️ TREC > Error at xs/ys > 976 is not in list
⚠️ TREC > Error at xs/ys > 933 is not in list
⚠️ TREC > Error at xs/ys > 933 is not in list
⚠️ TREC > Error at xs/ys > 952 is not in list
⚠️ TREC > Error at xs/ys > 1175 is not in list
⚠️ TREC > Error at xs/ys > 298 is not in list
E

|  |  |  |  |  |  |  |  |  |  | Đvt | Đvt |  |  |  |  |
|  |  |  |  |  |  |  |  |  |  | Đvt | Đvt | Số lượng (cây) 1,066 | Khối lượng (kg) | (kg) |  |
|  |  |  | 1 | 1 | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Kg | Kg | (cây) 1,066 | (kg) | (kg) |  |
|  |  |  | 1 | 1 | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Kg | Kg | (cây) 1,066 | 7.695 | 7.695 |  |
|  |  |  |  |  | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Kg | Kg | (cây) 1,066 | 7.695 | 7.695 |  |
|  |  |  |  |  | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Kg | Kg | 41 | 426 | 426 |  |
|  |  |  |  |  | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Kg Kg Kg Ve | Kg Kg Kg |  | 74 | 74 |  |
|  |  |  |  |  | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Thép cây D10 CB400V Thép cây D12 CB400V Thép cây D16 CB400V | Kg Kg Kg | Kg Kg Kg |  | 74 | 74 |  |
|  |  | 4 | 4 | 4 | hép cây D18 CB400V |  |  |  |  | Kg Kg Kg | Kg Kg Kg |  | 74 | 74 |  |
|  |  | 4 | 4 | 4 |  |  |  |  |  | Kg Kg Kg | Kg Kg Kg |  | 74 | 74 |  |
|  |  | 4 | 4 | 4 |  |  |  |  |  | Kg Kg Kg | Kg Kg Kg |  | 9.711 | 9.711 |  |
|  |  | 4 | 4 | 4 |  |  |  |  |  | Kg Kg Kg | Kg Kg Kg |  | 9.711 | 9.711 |  |
|  |  | 5 | 5 | 5 | hép cây D22 CB400 V | 022 C 1221 |  |  |  | Kg Kg Kg | Kg Kg Kg |  | 9.711 | 9.711 |  |
|  |  | 5 | 5 | 5 |  |  |  |  |  | Kg Kg Kg | Kg Kg Kg | 588 | 20.501 | 20.501 |  |
|  |  | 6 | 6 |  | hép cây 1225 CB400V |  |  |  |  | Kg Kg Kg | Kg Kg Kg | 588 | 20.501 | 20.501 |  |
|  |  | 6 | 6 |  |  |  |  |  |  | Kg Kg Kg | Kg Kg Kg | 10p | 5.631 33.580 77.618 | 5.631 33.580 77.618 |  |
|  |  | 6 | 6 |  |  |  |  |  |  | Kg Kg Kg | Kg Kg Kg |  | 5.631 33.580 77.618 | 5.631 33.580 77.618 |  |
|  |  | 7 | 7 | 7 | hép cây D28 CB400V |  |  |  |  | 19 Ka |  | 1ZY 593 2.832 | 5.631 33.580 77.618 | 5.631 33.580 77.618 |  |
|  |  | 7 | 7 | 7 |  |  |  |  |  |  |  | 593 2.832 | 5.631 33.580 77.618 | 5.631 33.580 77.618 |  |
|  |  | Cô |  |  | ng KANDALING |  |  |  |  | Lang |  | 593 2.832 | 5.631 33.580 77.618 | 5.631 33.580 77.618 |  |
|  |  |  |  |  |  |  |  |  |  |  |  | 593 2.832 | 5.631 33.580 77.618 | 5.631 33.580 77.618 |  |
|  |  |  |  |  |  |  |  |  |  |  |  | 593 2.832 | 5.631 33.580 77.618 | 5.631 33.580 77.618 |  |
|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  | Stt 2 3 Z E 2 H 15 CB400v C3400V CB400V |

Số lượng / Khối lượng
Chủng loại vật liệu
4
Thép cây D18 CB400V
415
Thép cây D22 CB400V
Thép cây D25 CB400V
Kg
125
Thép cây D28 CB400V
Kg
Cộng
Thuế GTGT 1007
""",
"""
QT.ĐTMS.02/BMO1
CÔNG TY CÔ PHÂN CỘNG HÒA XÃ HỘI CHÚ NGHĨA VIỆT NAM
PC1 MIÊN NAM Độc lập - Tự do - Hạnh phúc
BAN ĐIÊU HÀNH DỰ ÁN
Đồng Nai, ngày 03 tháng 02 năm 2025
GIÂY ĐÊ NGHỊ CẬP VẬT TƯ
V/v: Trình cấp vật tư phục vụ công tác thi công
Công trình: Đường dây 220kV Sông Mây - Tam Phước
Hang mục: Phân Móng
Kính gửi: Ong Phó Tông Giám đốc Công ty;
Phòng Điều hành dư nn
- Căn cứ vào tình hình thi công trên công trường
Ban Điều hành dự án kính đề nghi ông Phó Tông Giám đốc Công ty và Phòng Điều hành dự án cung cấp vật
tư phuc vu thi công công trình với sô lương cu thê như sau:

| STT | Chủng loại vật tư | Đơn vị | Khối lượng | Khối lượng | Khối lượng | Khối lượng | Ghi chú |
| STT | Chủng loại vật tư | Đơn vị | Tiên lượng | Đã cấp | Đề nghị cấp | Còn lại | Ghi chú |
| I | Móng VT39 (4T50-80-XL) |  |  |  |  |  |  |
| 1 | Thép F08 - AI | kg | 2.338,82 |  | 2.338.82 |  |  |
| 2 | Thép F10 - AIII | kg | 1.144,77 |  | 1.144,77 |  |  |
| 3 | Thép F14-AII | kg | 9.079,69 |  | 9.079,69 |  |  |
| 4 | Thép F25 - AIII | kg | 11.502,63 |  | 11.502,63 |  |  |
| 5 | Thép F28 - AIII | kg | 6.020.52 |  | 6.020.52 |  |  |
| 6 | STUBAR | Bộ | 4,00 |  | 4,00 |  | Stubar, tiếp địa có tại kho Trảng Bom |
| 7 | Tiếp địa TĐ4x40-32 | bộ | 1,00 |  | 1,00 |  | Stubar, tiếp địa có tại kho Trảng Bom |
| Tổng thép | Tổng thép |  | 30.086,43 |  | 30.086,43 |  |  |

Ghi chú:
- Thời gian để nghị cấp: ngày 06/02/2025
- Địa điêm tiệp nhận: Tại vị trí móng 39 thuộc Tam Phước - Biên Hòa - Đông Nai Công ty Minh Phương Mr
Đinh SDT: 88 177744889
Kính đề nghị Phó Tông Giám đốc Công ty, Phòng Điều hành dự án xem xét giải quyết
Trân trọng
P. TỔNG GIÁM ĐỐC P. ĐIỀU HÀNH DƯ AN Ban ĐHDA
Trần Ngọc Dũng
""",
"""
CÔNG TY CP KINH DOANH THƯƠNG MẠI THÉP ĐẠI VIỆT
S Địa chỉ: Ổ 14, Lô H3, Đường Số 1, KDC Vĩnh Phú 2,
Phường Vĩnh Phú, Thành phố Thuận An, Tỉnh Dương
ĐẠI VIỆT
Website: daivietsteel.com, email: Kdthepdaiviet O gmail.com
Sô: 0802/DAIVIET-NSG/2025 Bình Dương, ngày 08/02/2025
ĐƠN ĐAT HANG
Kính gửi: CÔNG TY TNHH XUẤT NHẬP KHẦU THƯƠNG MẠI GAN
ĐT:
Trước tiên, Công ty CP Kinh Doanh TM Thép Đại Việt chân thành cảm ơn sự hợp tác của Quý Đơn vị
Cản cứ hợp đồng số nguyên tắc: 164-2023/HĐNT-NSG-ĐV ngày 100772023, công ty Đại Việt có nhu câu đặt hàng như sau
I. THÔNG TIN VỀ LÔ HÀNG:

| TT | Chủng loại - Mác thép | Qui cách | Số lượng cây | Barem (kg/cây) | Khối lượng (kg) | ĐƠN GIÁ (đ/kg) | THÀNH TIÊN (Đồng) | GHI CHÚ | GHI CHÚ |
| TT | Chủng loại - Mác thép | Qui cách | Số lượng cây | Barem (kg/cây) | Khối lượng (kg) | ĐƠN GIÁ (đ/kg) | THÀNH TIÊN (Đồng) | Số bó | Cây lẽ |
|  | ID6VASCB240T |  | 1 cuộn |  | 2.100] | 13.440 | 28.224.000 |  |  |
| 2 | DDVVASCB240T |  | 1 cuộn |  | 2.100] | 13.440 | 28.224.000 |  |  |
|  | D10VASCB400V | 11.7m/c | 1.000 | 6,89 | 6.890] | 13.340 | 91.912.600 |  | 120 |
|  | D12VASCB400V | 11.7m/c | 350 | 9,89 | 3.462] | 13.340 | 46.183.080 |  | 30 |
|  | D16VASCB400V | 11.7m/c | 500 | 17,80 | 8.900] | 13.340 | 118.726.000 |  | 140 |
| 6 | D18VASCB400V | 11.7m/c | 100 | 22,48 | 2.248] | 13.340  | 29.988.320 |  | 100 |
|  | D20VASCB400V | 11.7m/c | 300 | 27,77 | 8.331 | 13.340  | 111.135.540 |  | 72 |
|  | Cộng tiên hàng |  |  |  | 34.031 |  | 454.393.540 |  |  |
|  | THUẾ VAT 10% |  |  |  |  |  | 45.439.354 |  |  |
|  | Tống cộng |  |  |  |  |  | 499.832.894 |  |  |

- Hàng hóa mới 100%, không bị nứt nẻ, hàng cấp đúng tiêu chuấn.
Hàng thắng W Hàng cong Phiếu KCS
II. THÔNG TIN NHẬN HÀNG:
1.Địa điểm nhận hàng KHO BÊN BÁN TẠI KCN ĐẤT CUỐC - TUỆ MINH - BÌNH DƯƠNG
2.Người nhận hàng: Theo giấy giới thiệu
3.Thời gian nhận hàng: Ngày: 10/02/2025
4.Kiểm đếm số lượng: Thép cuộn tính theo cân, Thép cây tính theo barem (như bảng tính) hoặc theo
phiêu cân nhà máy
5.Điện thoại liên hệ: Ms Như - 0964 U4U 642
6.Thanh toán: Thanh toán trong vòng 30 ngày kể từ ngày nhận hàng
7.Thông tin khác: Chứng từ theo hàng: BBGN, Chứng chi chất lượng, chứng chỉ xuất xưởng
Thông tin xuất hoá đơn: Theo Hợp đống
Rất mong sớm nhận được phản hôi của Quý công ty để chúng tôi có kế hoạch nhận hàng nhanh nhất
Xin chân thành cảm ơn
Ors
XÁC NHẬN CỦA BÊN BÁN CÔNG TY CP KINH DOANH TM THÉP ĐẠI VIỆT
CÔNG TY CỔ PHÁI
KINH DOAN)
THƯƠNG MẠI 1
ĐẠI VIỆT
GIÁM ĐỐC
Lê Văn Chinh
""",
"""
text a tmp

| AA | BA | merge heborder | merge heborder | merge heborder | CA | DA |
| EA | FA | GA | HA | IAA | merge v inside | JA |
| merge v border | KA | merge vh inside | merge vh inside | LA | merge v inside | MA |
| merge v border | NA | merge vh inside | merge vh inside | OA | merge v inside | PA |
| merge v border | QA | RA | SA | TA | UA | VA |
| WA | merge h inside | merge h inside | merge h inside | XA | merge vh border | merge vh border |
| YA | ZA | 1A | 2A | 3A | merge vh border | merge vh border |

text b
text c text d

| 4A | 5A | abc | def |
| 8A | 9A | 9A | 10 |
| 11 | 12 | 13 | 14 |

abc/def outlier
texte text f
""",
]

# ====================================================================================================

import pkg.UTILS.UTILS as UTILS
from pkg.LLM.LLM import Process_LLM

def llm_1_extract_jsonapi(gr_extracted_vdocr):
    schema_dondathang = """
{
    "type": "object",
    "description": "Đơn đặt hàng",
    "properties": {
        "Khách hàng": {
            "type": "object",
            "description": "Khách hàng, công ty yêu cầu vật tư/hàng hoá/sản phẩm",
            "properties": {
                "Tên": {"type": "string", "description": "Tên công ty, khách hàng"},
                "Địa chỉ": {"type": "string", "description": "Địa chỉ công ty, khách hàng"}
            }
        },
        "Danh sách vật tư": {
            "type": "array",
            "description": "Danh sách vật tư/hàng hoá/sản phẩm",
            "items": {
                "type": "object",
                "description": "Vật tư/hàng hoá/sản phẩm",
                "properties": {
                    "Vật tư": {"type": "string", "description": "Tên vật tư/hàng hoá/sản phẩm + chủng loại + quy cách + tiêu chuẩn + hình dạng + kích thước"},
                    "Xuất xứ": {"type": "string"},
                    "Khối lượng - Số lượng": {"type": "object", "properties": {"Giá trị": {"type": "number"}, "Đơn vị": {"type": "string", "enum": ["kg", "tấn", "cây", "tấm", "bộ", "bó", "cuộn", "-1"]}}},
                    "Ghi chú vật tư": {"type": "string"}
                }
            }
        },
        "Ghi chú chung": {"type": "string"}
    }
}
"""
    prompt_1 = f"""
Bạn là chuyên gia trích xuất dữ liệu.
Bạn sẽ được cung cấp: (1) Tin nhắn văn bản của khách hàng, và (2) Schema cấu trúc của kết quả.
Nhiệm vụ của bạn là: (3) Trích xuất dữ liệu JSON từ tin nhắn văn bản của khách hàng.

### (1) Tin nhắn văn bản của khách hàng:
\"\"\"
{gr_extracted_vdocr.strip()}
\"\"\"

### (2) Schema cấu trúc của kết quả:
```
{schema_dondathang.strip()}
```

### (3) Nhiệm vụ:
Từ tin nhắn văn bản của khách hàng, trích xuất dữ liệu dưới dạng JSON, tuân thủ schema một cách chính xác.
Nếu trường thông tin bị thiếu, không rõ ràng, hoặc không được nhắc đến, thì điền giá trị chuỗi "-1" nếu là string, điền số -1 nếu là number.
Định dạng kết quả: Không giải thích, không bình luận, không văn bản thừa. Chỉ trả về kết quả JSON hợp lệ. Bắt đầu bằng "{{", kết thúc bằng "}}".
""".strip()
    return UTILS.str2dict_advanced(Process_LLM(prompt_1))

def llm_2_edit_jsonapi(gr_user_message, gr_jsonapi):
    prompt_2 = f"""
Bạn sẽ được cung cấp: (1) JSON dữ liệu, và (2) Yêu cầu của người dùng.
Nhiệm vụ của bạn là: (3) Chỉnh sửa JSON dữ liệu theo yêu cầu của người dùng.

### (1) JSON dữ liệu:
```
{UTILS.dict2str(gr_jsonapi)}
```

### (2) Yêu cầu của người dùng:
\"\"\"
{gr_user_message}
\"\"\"

### (3) Nhiệm vụ:
Chỉnh sửa JSON dữ liệu theo yêu cầu của người dùng một cách chính xác và trả về JSON dữ liệu đã được chỉnh sửa.
Nếu bạn không hiểu yêu cầu của người dùng, chỉ cần trả về JSON dữ liệu gốc.
Định dạng kết quả: Không giải thích, không bình luận, không văn bản thừa. Chỉ trả về kết quả JSON hợp lệ. Bắt đầu bằng "{{", kết thúc bằng "}}".
"""
    return UTILS.str2dict_advanced(Process_LLM(prompt_2))

# ====================================================================================================

import gradio as gr

theme = gr.themes.Base(
    primary_hue="neutral", secondary_hue="neutral", neutral_hue="neutral",
    font=[gr.themes.GoogleFont('Inter')], font_mono=[gr.themes.GoogleFont('Ubuntu Mono')]
)
head = """
<link rel="icon" href="https://cdn.jsdelivr.net/gh/OneLevelStudio/CORE/static/favicon.png">
"""
css = """
footer { display: none !important; }
"""

# ====================================================================================================

def scan_jsonapi(gr_jsonapi):
    for i1, e1 in enumerate(gr_jsonapi['Danh sách vật tư']):
        bot_msg = ""
        field_to_edit = ""
        if str(e1['Vật tư']).strip() == "-1":
            bot_msg = f"✍️ Tên của vật tư thứ {i1+1}:"
            field_to_edit = f"gr_jsonapi['Danh sách vật tư'][{i1}]['Vật tư']"
        elif str(e1['Xuất xứ']).strip() == "-1":
            bot_msg = f"✍️ Xuất xứ của vật tư thứ {i1+1} ({e1['Vật tư']}):"
            field_to_edit = f"gr_jsonapi['Danh sách vật tư'][{i1}]['Xuất xứ']"
        elif str(e1['Khối lượng - Số lượng']['Đơn vị']).strip() == "-1":
            bot_msg = f"✍️ Đơn vị của vật tư thứ {i1+1} ({e1['Vật tư']}):"
            field_to_edit = f"gr_jsonapi['Danh sách vật tư'][{i1}]['Khối lượng - Số lượng']['Đơn vị']"
        elif str(e1['Khối lượng - Số lượng']['Giá trị']).strip() == "-1":
            bot_msg = f"✍️ Giá trị của vật tư thứ {i1+1} ({e1['Vật tư']}):"
            field_to_edit = f"gr_jsonapi['Danh sách vật tư'][{i1}]['Khối lượng - Số lượng']['Giá trị']"
        if bot_msg != "":
            break
    return {
        "bot_msg": bot_msg if bot_msg != "" else "💬 Bạn có muốn chỉnh sửa gì thêm?",
        "field_to_edit": field_to_edit
    }

# ====================================================================================================

def fn_upload(gr_history, gr_uploaded_file):
    gr_history += [{"role": "assistant", "content": f"Bạn đã tải lên file:"}]
    gr_history += [{"role": "assistant", "content": gr.File(gr_uploaded_file)}]
    gr_extracted_vdocr = TEMP_VDOCR_EXTRACTED[0]
    gr_jsonapi = llm_1_extract_jsonapi(gr_extracted_vdocr)
    gr_table = [[e['Vật tư'], e['Xuất xứ'], e['Khối lượng - Số lượng']['Giá trị'], e['Khối lượng - Số lượng']['Đơn vị'], e['Ghi chú vật tư']] for e in gr_jsonapi['Danh sách vật tư']]
    scan_res = scan_jsonapi(gr_jsonapi)
    gr_field_to_edit = scan_res['field_to_edit']
    gr_history += [{"role": "assistant", "content": scan_res['bot_msg']}]
    return gr_history, gr_extracted_vdocr, gr_jsonapi, gr_table, gr_field_to_edit

def fn_chat_1(gr_history, gr_message):
    gr_history += [{"role": "user", "content": gr_message['text']}]
    gr_user_message = gr_message['text']
    gr_message = ""
    return gr_history, gr_message, gr_user_message

def fn_chat_2(gr_history, gr_user_message, gr_jsonapi, gr_field_to_edit):
    # ---------- Case 1: gr_field_to_edit ----------
    if gr_field_to_edit.strip() != "":
        exec(f"{gr_field_to_edit} = '{gr_user_message}'")
        scan_res = scan_jsonapi(gr_jsonapi)
        gr_field_to_edit = scan_res['field_to_edit']
        gr_history += [{"role": "assistant", "content": scan_res['bot_msg']}]
    # ---------- Case 2: gr_field_to_edit is "" ----------
    else:
        gr_jsonapi_new = llm_2_edit_jsonapi(gr_user_message, gr_jsonapi)
        if gr_jsonapi == gr_jsonapi_new:
            gr_history += [{"role": "assistant", "content": "📄 Không chỉnh sửa\n💬 Bạn có muốn chỉnh sửa gì thêm?"}]
        else:
            gr_history += [{"role": "assistant", "content": "📝 Chỉnh sửa hoàn thành\n💬 Bạn có muốn chỉnh sửa gì thêm?"}]
        gr_jsonapi = gr_jsonapi_new
    # ----------------------------------------------------
    gr_table = [[e['Vật tư'], e['Xuất xứ'], e['Khối lượng - Số lượng']['Giá trị'], e['Khối lượng - Số lượng']['Đơn vị'], e['Ghi chú vật tư']] for e in gr_jsonapi['Danh sách vật tư']]
    return gr_history, gr_jsonapi, gr_table, gr_field_to_edit

with gr.Blocks(title="NSG", theme=theme, head=head, css=css, analytics_enabled=False, fill_height=True, fill_width=True) as demo:
    with gr.Row():
        with gr.Column():
            gr_uploaded_file = gr.File()
            gr_extracted_vdocr = gr.Textbox(max_lines=5, interactive=False, label="gr_extracted_vdocr")
            gr_user_message = gr.Textbox(max_lines=1, interactive=False, label="gr_user_message")
            gr_field_to_edit = gr.Textbox(max_lines=1, interactive=False, label="gr_field_to_edit")
        with gr.Column():
            gr_history = gr.Chatbot(type="messages", placeholder="# NSG", group_consecutive_messages=False, container=False)
            gr_message = gr.MultimodalTextbox(file_count="single", placeholder="Nhập tin nhắn", submit_btn=True, autofocus=True, autoscroll=True, container=False)
        with gr.Column():
            gr_table = gr.DataFrame(headers=["Vật tư", "Xuất xứ", "Giá trị", "Đơn vị", "Ghi chú vật tư"], show_row_numbers=True)
            gr_jsonapi = gr.JSON(open=True)

    # Upload file
    gr.on(
        triggers=[gr_uploaded_file.upload],
        fn=fn_upload,
        inputs=[gr_history, gr_uploaded_file],
        outputs=[gr_history, gr_extracted_vdocr, gr_jsonapi, gr_table, gr_field_to_edit],
        show_progress="full"
    )
    # Chat
    gr.on(
        triggers=[gr_message.submit],
        fn=fn_chat_1,
        inputs=[gr_history, gr_message],
        outputs=[gr_history, gr_message, gr_user_message],
        show_progress="hidden"
    ).then(
        fn=fn_chat_2,
        inputs=[gr_history, gr_user_message, gr_jsonapi, gr_field_to_edit],
        outputs=[gr_history, gr_jsonapi, gr_table, gr_field_to_edit],
        show_progress="hidden"
    )

# ====================================================================================================

if __name__ == "__main__":
    demo.launch(server_port=1234)